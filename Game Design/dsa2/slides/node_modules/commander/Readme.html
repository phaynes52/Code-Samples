<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta name="generator" content="pandoc" />
  <title># Commander.js</title>
  <style type="text/css">code{white-space: pre;}</style>
  <style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
  </style>
  <link rel="stylesheet" href="../../../markdown.css" type="text/css" />
</head>
<body>
<h1 id="commander.js">Commander.js</h1>
<p><a href="http://travis-ci.org/tj/commander.js"><img src="https://api.travis-ci.org/tj/commander.js.svg?branch=master" alt="Build Status" /></a> <a href="https://www.npmjs.org/package/commander"><img src="http://img.shields.io/npm/v/commander.svg?style=flat" alt="NPM Version" /></a> <a href="https://npmcharts.com/compare/commander?minimal=true"><img src="https://img.shields.io/npm/dm/commander.svg?style=flat" alt="NPM Downloads" /></a> <a href="https://packagephobia.now.sh/result?p=commander"><img src="https://packagephobia.now.sh/badge?p=commander" alt="Install Size" /></a> <a href="https://gitter.im/tj/commander.js?utm_source=badge&amp;utm_medium=badge&amp;utm_campaign=pr-badge&amp;utm_content=badge"><img src="https://badges.gitter.im/Join%20Chat.svg" alt="Join the chat at https://gitter.im/tj/commander.js" /></a></p>
<p>The complete solution for <a href="http://nodejs.org">node.js</a> command-line interfaces, inspired by Ruby's <a href="https://github.com/commander-rb/commander">commander</a>.<br />
<a href="http://tj.github.com/commander.js/">API documentation</a></p>
<h2 id="installation">Installation</h2>
<pre><code>$ npm install commander --save</code></pre>
<h2 id="option-parsing">Option parsing</h2>
<p>Options with commander are defined with the <code>.option()</code> method, also serving as documentation for the options. The example below parses args and options from <code>process.argv</code>, leaving remaining args as the <code>program.args</code> array which were not consumed by options.</p>
<div class="sourceCode"><pre class="sourceCode js"><code class="sourceCode javascript"><span class="co">#!/usr/bin/env node</span>

<span class="co">/**</span>
<span class="co"> * Module dependencies.</span>
<span class="co"> */</span>

<span class="kw">var</span> program <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;commander&#39;</span>)<span class="op">;</span>

program
  .<span class="at">version</span>(<span class="st">&#39;0.1.0&#39;</span>)
  .<span class="at">option</span>(<span class="st">&#39;-p, --peppers&#39;</span><span class="op">,</span> <span class="st">&#39;Add peppers&#39;</span>)
  .<span class="at">option</span>(<span class="st">&#39;-P, --pineapple&#39;</span><span class="op">,</span> <span class="st">&#39;Add pineapple&#39;</span>)
  .<span class="at">option</span>(<span class="st">&#39;-b, --bbq-sauce&#39;</span><span class="op">,</span> <span class="st">&#39;Add bbq sauce&#39;</span>)
  .<span class="at">option</span>(<span class="st">&#39;-c, --cheese [type]&#39;</span><span class="op">,</span> <span class="st">&#39;Add the specified type of cheese [marble]&#39;</span><span class="op">,</span> <span class="st">&#39;marble&#39;</span>)
  .<span class="at">parse</span>(<span class="va">process</span>.<span class="at">argv</span>)<span class="op">;</span>

<span class="va">console</span>.<span class="at">log</span>(<span class="st">&#39;you ordered a pizza with:&#39;</span>)<span class="op">;</span>
<span class="cf">if</span> (<span class="va">program</span>.<span class="at">peppers</span>) <span class="va">console</span>.<span class="at">log</span>(<span class="st">&#39;  - peppers&#39;</span>)<span class="op">;</span>
<span class="cf">if</span> (<span class="va">program</span>.<span class="at">pineapple</span>) <span class="va">console</span>.<span class="at">log</span>(<span class="st">&#39;  - pineapple&#39;</span>)<span class="op">;</span>
<span class="cf">if</span> (<span class="va">program</span>.<span class="at">bbqSauce</span>) <span class="va">console</span>.<span class="at">log</span>(<span class="st">&#39;  - bbq&#39;</span>)<span class="op">;</span>
<span class="va">console</span>.<span class="at">log</span>(<span class="st">&#39;  - %s cheese&#39;</span><span class="op">,</span> <span class="va">program</span>.<span class="at">cheese</span>)<span class="op">;</span></code></pre></div>
<p>Short flags may be passed as a single arg, for example <code>-abc</code> is equivalent to <code>-a -b -c</code>. Multi-word options such as &quot;--template-engine&quot; are camel-cased, becoming <code>program.templateEngine</code> etc.</p>
<p>Note that multi-word options starting with <code>--no</code> prefix negate the boolean value of the following word. For example, <code>--no-sauce</code> sets the value of <code>program.sauce</code> to false.</p>
<div class="sourceCode"><pre class="sourceCode js"><code class="sourceCode javascript"><span class="co">#!/usr/bin/env node</span>

<span class="co">/**</span>
<span class="co"> * Module dependencies.</span>
<span class="co"> */</span>

<span class="kw">var</span> program <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;commander&#39;</span>)<span class="op">;</span>

program
  .<span class="at">option</span>(<span class="st">&#39;--no-sauce&#39;</span><span class="op">,</span> <span class="st">&#39;Remove sauce&#39;</span>)
  .<span class="at">parse</span>(<span class="va">process</span>.<span class="at">argv</span>)<span class="op">;</span>

<span class="va">console</span>.<span class="at">log</span>(<span class="st">&#39;you ordered a pizza&#39;</span>)<span class="op">;</span>
<span class="cf">if</span> (<span class="va">program</span>.<span class="at">sauce</span>) <span class="va">console</span>.<span class="at">log</span>(<span class="st">&#39;  with sauce&#39;</span>)<span class="op">;</span>
<span class="cf">else</span> <span class="va">console</span>.<span class="at">log</span>(<span class="st">&#39; without sauce&#39;</span>)<span class="op">;</span></code></pre></div>
<h2 id="version-option">Version option</h2>
<p>Calling the <code>version</code> implicitly adds the <code>-V</code> and <code>--version</code> options to the command. When either of these options is present, the command prints the version number and exits.</p>
<pre><code>$ ./examples/pizza -V
0.0.1</code></pre>
<p>If you want your program to respond to the <code>-v</code> option instead of the <code>-V</code> option, simply pass custom flags to the <code>version</code> method using the same syntax as the <code>option</code> method.</p>
<div class="sourceCode"><pre class="sourceCode js"><code class="sourceCode javascript">program
  .<span class="at">version</span>(<span class="st">&#39;0.0.1&#39;</span><span class="op">,</span> <span class="st">&#39;-v, --version&#39;</span>)</code></pre></div>
<p>The version flags can be named anything, but the long option is required.</p>
<h2 id="command-specific-options">Command-specific options</h2>
<p>You can attach options to a command.</p>
<div class="sourceCode"><pre class="sourceCode js"><code class="sourceCode javascript"><span class="co">#!/usr/bin/env node</span>

<span class="kw">var</span> program <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;commander&#39;</span>)<span class="op">;</span>

program
  .<span class="at">command</span>(<span class="st">&#39;rm &lt;dir&gt;&#39;</span>)
  .<span class="at">option</span>(<span class="st">&#39;-r, --recursive&#39;</span><span class="op">,</span> <span class="st">&#39;Remove recursively&#39;</span>)
  .<span class="at">action</span>(<span class="kw">function</span> (dir<span class="op">,</span> cmd) <span class="op">{</span>
    <span class="va">console</span>.<span class="at">log</span>(<span class="st">&#39;remove &#39;</span> <span class="op">+</span> dir <span class="op">+</span> (<span class="va">cmd</span>.<span class="at">recursive</span> <span class="op">?</span> <span class="st">&#39; recursively&#39;</span> : <span class="st">&#39;&#39;</span>))
  <span class="op">}</span>)

<span class="va">program</span>.<span class="at">parse</span>(<span class="va">process</span>.<span class="at">argv</span>)</code></pre></div>
<p>A command's options are validated when the command is used. Any unknown options will be reported as an error. However, if an action-based command does not define an action, then the options are not validated.</p>
<h2 id="coercion">Coercion</h2>
<div class="sourceCode"><pre class="sourceCode js"><code class="sourceCode javascript"><span class="kw">function</span> <span class="at">range</span>(val) <span class="op">{</span>
  <span class="cf">return</span> <span class="va">val</span>.<span class="at">split</span>(<span class="st">&#39;..&#39;</span>).<span class="at">map</span>(Number)<span class="op">;</span>
<span class="op">}</span>

<span class="kw">function</span> <span class="at">list</span>(val) <span class="op">{</span>
  <span class="cf">return</span> <span class="va">val</span>.<span class="at">split</span>(<span class="st">&#39;,&#39;</span>)<span class="op">;</span>
<span class="op">}</span>

<span class="kw">function</span> <span class="at">collect</span>(val<span class="op">,</span> memo) <span class="op">{</span>
  <span class="va">memo</span>.<span class="at">push</span>(val)<span class="op">;</span>
  <span class="cf">return</span> memo<span class="op">;</span>
<span class="op">}</span>

<span class="kw">function</span> <span class="at">increaseVerbosity</span>(v<span class="op">,</span> total) <span class="op">{</span>
  <span class="cf">return</span> total <span class="op">+</span> <span class="dv">1</span><span class="op">;</span>
<span class="op">}</span>

program
  .<span class="at">version</span>(<span class="st">&#39;0.1.0&#39;</span>)
  .<span class="at">usage</span>(<span class="st">&#39;[options] &lt;file ...&gt;&#39;</span>)
  .<span class="at">option</span>(<span class="st">&#39;-i, --integer &lt;n&gt;&#39;</span><span class="op">,</span> <span class="st">&#39;An integer argument&#39;</span><span class="op">,</span> parseInt)
  .<span class="at">option</span>(<span class="st">&#39;-f, --float &lt;n&gt;&#39;</span><span class="op">,</span> <span class="st">&#39;A float argument&#39;</span><span class="op">,</span> parseFloat)
  .<span class="at">option</span>(<span class="st">&#39;-r, --range &lt;a&gt;..&lt;b&gt;&#39;</span><span class="op">,</span> <span class="st">&#39;A range&#39;</span><span class="op">,</span> range)
  .<span class="at">option</span>(<span class="st">&#39;-l, --list &lt;items&gt;&#39;</span><span class="op">,</span> <span class="st">&#39;A list&#39;</span><span class="op">,</span> list)
  .<span class="at">option</span>(<span class="st">&#39;-o, --optional [value]&#39;</span><span class="op">,</span> <span class="st">&#39;An optional value&#39;</span>)
  .<span class="at">option</span>(<span class="st">&#39;-c, --collect [value]&#39;</span><span class="op">,</span> <span class="st">&#39;A repeatable value&#39;</span><span class="op">,</span> collect<span class="op">,</span> [])
  .<span class="at">option</span>(<span class="st">&#39;-v, --verbose&#39;</span><span class="op">,</span> <span class="st">&#39;A value that can be increased&#39;</span><span class="op">,</span> increaseVerbosity<span class="op">,</span> <span class="dv">0</span>)
  .<span class="at">parse</span>(<span class="va">process</span>.<span class="at">argv</span>)<span class="op">;</span>

<span class="va">console</span>.<span class="at">log</span>(<span class="st">&#39; int: %j&#39;</span><span class="op">,</span> <span class="va">program</span>.<span class="at">integer</span>)<span class="op">;</span>
<span class="va">console</span>.<span class="at">log</span>(<span class="st">&#39; float: %j&#39;</span><span class="op">,</span> <span class="va">program</span>.<span class="at">float</span>)<span class="op">;</span>
<span class="va">console</span>.<span class="at">log</span>(<span class="st">&#39; optional: %j&#39;</span><span class="op">,</span> <span class="va">program</span>.<span class="at">optional</span>)<span class="op">;</span>
<span class="va">program</span>.<span class="at">range</span> <span class="op">=</span> <span class="va">program</span>.<span class="at">range</span> <span class="op">||</span> []<span class="op">;</span>
<span class="va">console</span>.<span class="at">log</span>(<span class="st">&#39; range: %j..%j&#39;</span><span class="op">,</span> <span class="va">program</span>.<span class="at">range</span>[<span class="dv">0</span>]<span class="op">,</span> <span class="va">program</span>.<span class="at">range</span>[<span class="dv">1</span>])<span class="op">;</span>
<span class="va">console</span>.<span class="at">log</span>(<span class="st">&#39; list: %j&#39;</span><span class="op">,</span> <span class="va">program</span>.<span class="at">list</span>)<span class="op">;</span>
<span class="va">console</span>.<span class="at">log</span>(<span class="st">&#39; collect: %j&#39;</span><span class="op">,</span> <span class="va">program</span>.<span class="at">collect</span>)<span class="op">;</span>
<span class="va">console</span>.<span class="at">log</span>(<span class="st">&#39; verbosity: %j&#39;</span><span class="op">,</span> <span class="va">program</span>.<span class="at">verbose</span>)<span class="op">;</span>
<span class="va">console</span>.<span class="at">log</span>(<span class="st">&#39; args: %j&#39;</span><span class="op">,</span> <span class="va">program</span>.<span class="at">args</span>)<span class="op">;</span></code></pre></div>
<h2 id="regular-expression">Regular Expression</h2>
<div class="sourceCode"><pre class="sourceCode js"><code class="sourceCode javascript">program
  .<span class="at">version</span>(<span class="st">&#39;0.1.0&#39;</span>)
  .<span class="at">option</span>(<span class="st">&#39;-s --size &lt;size&gt;&#39;</span><span class="op">,</span> <span class="st">&#39;Pizza size&#39;</span><span class="op">,</span> <span class="ss">/</span><span class="sc">^(</span><span class="ss">large</span><span class="sc">|</span><span class="ss">medium</span><span class="sc">|</span><span class="ss">small</span><span class="sc">)$</span><span class="ss">/i</span><span class="op">,</span> <span class="st">&#39;medium&#39;</span>)
  .<span class="at">option</span>(<span class="st">&#39;-d --drink [drink]&#39;</span><span class="op">,</span> <span class="st">&#39;Drink&#39;</span><span class="op">,</span> <span class="ss">/</span><span class="sc">^(</span><span class="ss">coke</span><span class="sc">|</span><span class="ss">pepsi</span><span class="sc">|</span><span class="ss">izze</span><span class="sc">)$</span><span class="ss">/i</span>)
  .<span class="at">parse</span>(<span class="va">process</span>.<span class="at">argv</span>)<span class="op">;</span>
  
<span class="va">console</span>.<span class="at">log</span>(<span class="st">&#39; size: %j&#39;</span><span class="op">,</span> <span class="va">program</span>.<span class="at">size</span>)<span class="op">;</span>
<span class="va">console</span>.<span class="at">log</span>(<span class="st">&#39; drink: %j&#39;</span><span class="op">,</span> <span class="va">program</span>.<span class="at">drink</span>)<span class="op">;</span></code></pre></div>
<h2 id="variadic-arguments">Variadic arguments</h2>
<p>The last argument of a command can be variadic, and only the last argument. To make an argument variadic you have to append <code>...</code> to the argument name. Here is an example:</p>
<div class="sourceCode"><pre class="sourceCode js"><code class="sourceCode javascript"><span class="co">#!/usr/bin/env node</span>

<span class="co">/**</span>
<span class="co"> * Module dependencies.</span>
<span class="co"> */</span>

<span class="kw">var</span> program <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;commander&#39;</span>)<span class="op">;</span>

program
  .<span class="at">version</span>(<span class="st">&#39;0.1.0&#39;</span>)
  .<span class="at">command</span>(<span class="st">&#39;rmdir &lt;dir&gt; [otherDirs...]&#39;</span>)
  .<span class="at">action</span>(<span class="kw">function</span> (dir<span class="op">,</span> otherDirs) <span class="op">{</span>
    <span class="va">console</span>.<span class="at">log</span>(<span class="st">&#39;rmdir %s&#39;</span><span class="op">,</span> dir)<span class="op">;</span>
    <span class="cf">if</span> (otherDirs) <span class="op">{</span>
      <span class="va">otherDirs</span>.<span class="at">forEach</span>(<span class="kw">function</span> (oDir) <span class="op">{</span>
        <span class="va">console</span>.<span class="at">log</span>(<span class="st">&#39;rmdir %s&#39;</span><span class="op">,</span> oDir)<span class="op">;</span>
      <span class="op">}</span>)<span class="op">;</span>
    <span class="op">}</span>
  <span class="op">}</span>)<span class="op">;</span>

<span class="va">program</span>.<span class="at">parse</span>(<span class="va">process</span>.<span class="at">argv</span>)<span class="op">;</span></code></pre></div>
<p>An <code>Array</code> is used for the value of a variadic argument. This applies to <code>program.args</code> as well as the argument passed to your action as demonstrated above.</p>
<h2 id="specify-the-argument-syntax">Specify the argument syntax</h2>
<div class="sourceCode"><pre class="sourceCode js"><code class="sourceCode javascript"><span class="co">#!/usr/bin/env node</span>

<span class="kw">var</span> program <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;commander&#39;</span>)<span class="op">;</span>

program
  .<span class="at">version</span>(<span class="st">&#39;0.1.0&#39;</span>)
  .<span class="at">arguments</span>(<span class="st">&#39;&lt;cmd&gt; [env]&#39;</span>)
  .<span class="at">action</span>(<span class="kw">function</span> (cmd<span class="op">,</span> env) <span class="op">{</span>
     cmdValue <span class="op">=</span> cmd<span class="op">;</span>
     envValue <span class="op">=</span> env<span class="op">;</span>
  <span class="op">}</span>)<span class="op">;</span>

<span class="va">program</span>.<span class="at">parse</span>(<span class="va">process</span>.<span class="at">argv</span>)<span class="op">;</span>

<span class="cf">if</span> (<span class="kw">typeof</span> cmdValue <span class="op">===</span> <span class="st">&#39;undefined&#39;</span>) <span class="op">{</span>
   <span class="va">console</span>.<span class="at">error</span>(<span class="st">&#39;no command given!&#39;</span>)<span class="op">;</span>
   <span class="va">process</span>.<span class="at">exit</span>(<span class="dv">1</span>)<span class="op">;</span>
<span class="op">}</span>
<span class="va">console</span>.<span class="at">log</span>(<span class="st">&#39;command:&#39;</span><span class="op">,</span> cmdValue)<span class="op">;</span>
<span class="va">console</span>.<span class="at">log</span>(<span class="st">&#39;environment:&#39;</span><span class="op">,</span> envValue <span class="op">||</span> <span class="st">&quot;no environment given&quot;</span>)<span class="op">;</span></code></pre></div>
<p>Angled brackets (e.g. <code>&lt;cmd&gt;</code>) indicate required input. Square brackets (e.g. <code>[env]</code>) indicate optional input.</p>
<h2 id="git-style-sub-commands">Git-style sub-commands</h2>
<div class="sourceCode"><pre class="sourceCode js"><code class="sourceCode javascript"><span class="co">// file: ./examples/pm</span>
<span class="kw">var</span> program <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;commander&#39;</span>)<span class="op">;</span>

program
  .<span class="at">version</span>(<span class="st">&#39;0.1.0&#39;</span>)
  .<span class="at">command</span>(<span class="st">&#39;install [name]&#39;</span><span class="op">,</span> <span class="st">&#39;install one or more packages&#39;</span>)
  .<span class="at">command</span>(<span class="st">&#39;search [query]&#39;</span><span class="op">,</span> <span class="st">&#39;search with optional query&#39;</span>)
  .<span class="at">command</span>(<span class="st">&#39;list&#39;</span><span class="op">,</span> <span class="st">&#39;list packages installed&#39;</span><span class="op">,</span> <span class="op">{</span><span class="dt">isDefault</span><span class="op">:</span> <span class="kw">true</span><span class="op">}</span>)
  .<span class="at">parse</span>(<span class="va">process</span>.<span class="at">argv</span>)<span class="op">;</span></code></pre></div>
<p>When <code>.command()</code> is invoked with a description argument, no <code>.action(callback)</code> should be called to handle sub-commands, otherwise there will be an error. This tells commander that you're going to use separate executables for sub-commands, much like <code>git(1)</code> and other popular tools.<br />
The commander will try to search the executables in the directory of the entry script (like <code>./examples/pm</code>) with the name <code>program-command</code>, like <code>pm-install</code>, <code>pm-search</code>.</p>
<p>Options can be passed with the call to <code>.command()</code>. Specifying <code>true</code> for <code>opts.noHelp</code> will remove the subcommand from the generated help output. Specifying <code>true</code> for <code>opts.isDefault</code> will run the subcommand if no other subcommand is specified.</p>
<p>If the program is designed to be installed globally, make sure the executables have proper modes, like <code>755</code>.</p>
<h3 id="harmony"><code>--harmony</code></h3>
<p>You can enable <code>--harmony</code> option in two ways: * Use <code>#! /usr/bin/env node --harmony</code> in the sub-commands scripts. Note some os version don’t support this pattern. * Use the <code>--harmony</code> option when call the command, like <code>node --harmony examples/pm publish</code>. The <code>--harmony</code> option will be preserved when spawning sub-command process.</p>
<h2 id="automated---help">Automated --help</h2>
<p>The help information is auto-generated based on the information commander already knows about your program, so the following <code>--help</code> info is for free:</p>
<pre><code> $ ./examples/pizza --help

   Usage: pizza [options]

   An application for pizzas ordering

   Options:

     -h, --help           output usage information
     -V, --version        output the version number
     -p, --peppers        Add peppers
     -P, --pineapple      Add pineapple
     -b, --bbq            Add bbq sauce
     -c, --cheese &lt;type&gt;  Add the specified type of cheese [marble]
     -C, --no-cheese      You do not want any cheese
</code></pre>
<h2 id="custom-help">Custom help</h2>
<p>You can display arbitrary <code>-h, --help</code> information by listening for &quot;--help&quot;. Commander will automatically exit once you are done so that the remainder of your program does not execute causing undesired behaviours, for example in the following executable &quot;stuff&quot; will not output when <code>--help</code> is used.</p>
<div class="sourceCode"><pre class="sourceCode js"><code class="sourceCode javascript"><span class="co">#!/usr/bin/env node</span>

<span class="co">/**</span>
<span class="co"> * Module dependencies.</span>
<span class="co"> */</span>

<span class="kw">var</span> program <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;commander&#39;</span>)<span class="op">;</span>

program
  .<span class="at">version</span>(<span class="st">&#39;0.1.0&#39;</span>)
  .<span class="at">option</span>(<span class="st">&#39;-f, --foo&#39;</span><span class="op">,</span> <span class="st">&#39;enable some foo&#39;</span>)
  .<span class="at">option</span>(<span class="st">&#39;-b, --bar&#39;</span><span class="op">,</span> <span class="st">&#39;enable some bar&#39;</span>)
  .<span class="at">option</span>(<span class="st">&#39;-B, --baz&#39;</span><span class="op">,</span> <span class="st">&#39;enable some baz&#39;</span>)<span class="op">;</span>

<span class="co">// must be before .parse() since</span>
<span class="co">// node&#39;s emit() is immediate</span>

<span class="va">program</span>.<span class="at">on</span>(<span class="st">&#39;--help&#39;</span><span class="op">,</span> <span class="kw">function</span>()<span class="op">{</span>
  <span class="va">console</span>.<span class="at">log</span>(<span class="st">&#39;  Examples:&#39;</span>)<span class="op">;</span>
  <span class="va">console</span>.<span class="at">log</span>(<span class="st">&#39;&#39;</span>)<span class="op">;</span>
  <span class="va">console</span>.<span class="at">log</span>(<span class="st">&#39;    $ custom-help --help&#39;</span>)<span class="op">;</span>
  <span class="va">console</span>.<span class="at">log</span>(<span class="st">&#39;    $ custom-help -h&#39;</span>)<span class="op">;</span>
  <span class="va">console</span>.<span class="at">log</span>(<span class="st">&#39;&#39;</span>)<span class="op">;</span>
<span class="op">}</span>)<span class="op">;</span>

<span class="va">program</span>.<span class="at">parse</span>(<span class="va">process</span>.<span class="at">argv</span>)<span class="op">;</span>

<span class="va">console</span>.<span class="at">log</span>(<span class="st">&#39;stuff&#39;</span>)<span class="op">;</span></code></pre></div>
<p>Yields the following help output when <code>node script-name.js -h</code> or <code>node script-name.js --help</code> are run:</p>
<pre><code>
Usage: custom-help [options]

Options:

  -h, --help     output usage information
  -V, --version  output the version number
  -f, --foo      enable some foo
  -b, --bar      enable some bar
  -B, --baz      enable some baz

Examples:

  $ custom-help --help
  $ custom-help -h
</code></pre>
<h2 id="outputhelpcb">.outputHelp(cb)</h2>
<p>Output help information without exiting. Optional callback cb allows post-processing of help text before it is displayed.</p>
<p>If you want to display help by default (e.g. if no command was provided), you can use something like:</p>
<div class="sourceCode"><pre class="sourceCode js"><code class="sourceCode javascript"><span class="kw">var</span> program <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;commander&#39;</span>)<span class="op">;</span>
<span class="kw">var</span> colors <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;colors&#39;</span>)<span class="op">;</span>

program
  .<span class="at">version</span>(<span class="st">&#39;0.1.0&#39;</span>)
  .<span class="at">command</span>(<span class="st">&#39;getstream [url]&#39;</span><span class="op">,</span> <span class="st">&#39;get stream URL&#39;</span>)
  .<span class="at">parse</span>(<span class="va">process</span>.<span class="at">argv</span>)<span class="op">;</span>

<span class="cf">if</span> (<span class="op">!</span><span class="va">process</span>.<span class="va">argv</span>.<span class="at">slice</span>(<span class="dv">2</span>).<span class="at">length</span>) <span class="op">{</span>
  <span class="va">program</span>.<span class="at">outputHelp</span>(make_red)<span class="op">;</span>
<span class="op">}</span>

<span class="kw">function</span> <span class="at">make_red</span>(txt) <span class="op">{</span>
  <span class="cf">return</span> <span class="va">colors</span>.<span class="at">red</span>(txt)<span class="op">;</span> <span class="co">//display the help text in red on the console</span>
<span class="op">}</span></code></pre></div>
<h2 id="helpcb">.help(cb)</h2>
<p>Output help information and exit immediately. Optional callback cb allows post-processing of help text before it is displayed.</p>
<h2 id="custom-event-listeners">Custom event listeners</h2>
<p>You can execute custom actions by listening to command and option events.</p>
<div class="sourceCode"><pre class="sourceCode js"><code class="sourceCode javascript"><span class="va">program</span>.<span class="at">on</span>(<span class="st">&#39;option:verbose&#39;</span><span class="op">,</span> <span class="kw">function</span> () <span class="op">{</span>
  <span class="va">process</span>.<span class="va">env</span>.<span class="at">VERBOSE</span> <span class="op">=</span> <span class="kw">this</span>.<span class="at">verbose</span><span class="op">;</span>
<span class="op">}</span>)<span class="op">;</span>

<span class="co">// error on unknown commands</span>
<span class="va">program</span>.<span class="at">on</span>(<span class="st">&#39;command:*&#39;</span><span class="op">,</span> <span class="kw">function</span> () <span class="op">{</span>
  <span class="va">console</span>.<span class="at">error</span>(<span class="st">&#39;Invalid command: %s</span><span class="sc">\n</span><span class="st">See --help for a list of available commands.&#39;</span><span class="op">,</span> <span class="va">program</span>.<span class="va">args</span>.<span class="at">join</span>(<span class="st">&#39; &#39;</span>))<span class="op">;</span>
  <span class="va">process</span>.<span class="at">exit</span>(<span class="dv">1</span>)<span class="op">;</span>
<span class="op">}</span>)<span class="op">;</span></code></pre></div>
<h2 id="examples">Examples</h2>
<div class="sourceCode"><pre class="sourceCode js"><code class="sourceCode javascript"><span class="kw">var</span> program <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;commander&#39;</span>)<span class="op">;</span>

program
  .<span class="at">version</span>(<span class="st">&#39;0.1.0&#39;</span>)
  .<span class="at">option</span>(<span class="st">&#39;-C, --chdir &lt;path&gt;&#39;</span><span class="op">,</span> <span class="st">&#39;change the working directory&#39;</span>)
  .<span class="at">option</span>(<span class="st">&#39;-c, --config &lt;path&gt;&#39;</span><span class="op">,</span> <span class="st">&#39;set config path. defaults to ./deploy.conf&#39;</span>)
  .<span class="at">option</span>(<span class="st">&#39;-T, --no-tests&#39;</span><span class="op">,</span> <span class="st">&#39;ignore test hook&#39;</span>)<span class="op">;</span>

program
  .<span class="at">command</span>(<span class="st">&#39;setup [env]&#39;</span>)
  .<span class="at">description</span>(<span class="st">&#39;run setup commands for all envs&#39;</span>)
  .<span class="at">option</span>(<span class="st">&quot;-s, --setup_mode [mode]&quot;</span><span class="op">,</span> <span class="st">&quot;Which setup mode to use&quot;</span>)
  .<span class="at">action</span>(<span class="kw">function</span>(env<span class="op">,</span> options)<span class="op">{</span>
    <span class="kw">var</span> mode <span class="op">=</span> <span class="va">options</span>.<span class="at">setup_mode</span> <span class="op">||</span> <span class="st">&quot;normal&quot;</span><span class="op">;</span>
    env <span class="op">=</span> env <span class="op">||</span> <span class="st">&#39;all&#39;</span><span class="op">;</span>
    <span class="va">console</span>.<span class="at">log</span>(<span class="st">&#39;setup for %s env(s) with %s mode&#39;</span><span class="op">,</span> env<span class="op">,</span> mode)<span class="op">;</span>
  <span class="op">}</span>)<span class="op">;</span>

program
  .<span class="at">command</span>(<span class="st">&#39;exec &lt;cmd&gt;&#39;</span>)
  .<span class="at">alias</span>(<span class="st">&#39;ex&#39;</span>)
  .<span class="at">description</span>(<span class="st">&#39;execute the given remote cmd&#39;</span>)
  .<span class="at">option</span>(<span class="st">&quot;-e, --exec_mode &lt;mode&gt;&quot;</span><span class="op">,</span> <span class="st">&quot;Which exec mode to use&quot;</span>)
  .<span class="at">action</span>(<span class="kw">function</span>(cmd<span class="op">,</span> options)<span class="op">{</span>
    <span class="va">console</span>.<span class="at">log</span>(<span class="st">&#39;exec &quot;%s&quot; using %s mode&#39;</span><span class="op">,</span> cmd<span class="op">,</span> <span class="va">options</span>.<span class="at">exec_mode</span>)<span class="op">;</span>
  <span class="op">}</span>).<span class="at">on</span>(<span class="st">&#39;--help&#39;</span><span class="op">,</span> <span class="kw">function</span>() <span class="op">{</span>
    <span class="va">console</span>.<span class="at">log</span>(<span class="st">&#39;  Examples:&#39;</span>)<span class="op">;</span>
    <span class="va">console</span>.<span class="at">log</span>()<span class="op">;</span>
    <span class="va">console</span>.<span class="at">log</span>(<span class="st">&#39;    $ deploy exec sequential&#39;</span>)<span class="op">;</span>
    <span class="va">console</span>.<span class="at">log</span>(<span class="st">&#39;    $ deploy exec async&#39;</span>)<span class="op">;</span>
    <span class="va">console</span>.<span class="at">log</span>()<span class="op">;</span>
  <span class="op">}</span>)<span class="op">;</span>

program
  .<span class="at">command</span>(<span class="st">&#39;*&#39;</span>)
  .<span class="at">action</span>(<span class="kw">function</span>(env)<span class="op">{</span>
    <span class="va">console</span>.<span class="at">log</span>(<span class="st">&#39;deploying &quot;%s&quot;&#39;</span><span class="op">,</span> env)<span class="op">;</span>
  <span class="op">}</span>)<span class="op">;</span>

<span class="va">program</span>.<span class="at">parse</span>(<span class="va">process</span>.<span class="at">argv</span>)<span class="op">;</span></code></pre></div>
<p>More Demos can be found in the <a href="https://github.com/tj/commander.js/tree/master/examples">examples</a> directory.</p>
<h2 id="license">License</h2>
<p>MIT</p>
</body>
</html>
